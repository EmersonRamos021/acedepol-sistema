# ๐จ Arquitetura Visual - Sistema ACEDEPOL

## ๐๏ธ Visรฃo Geral do Sistema

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    SISTEMA ACEDEPOL                                โ
โ              Sistema de Controle de Ponto                          โ
โ           Polรญcia Civil Nova Capital                               โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                         USUรRIOS                                 โ
โ                                                                  โ
โ  ๐ฎ Policial 1    ๐ฎ Policial 2    ๐ฎ Policial 3               โ
โ       โ                 โ                 โ                      โ
โ       โโโโโโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโโโโ                      โ
โ                         โ                                        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                          โ
        โโโโโโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโโโโ
        โ                                   โ
        โผ                                   โผ
โโโโโโโโโโโโโโโโโ                   โโโโโโโโโโโโโโโโโ
โ   DISCORD     โ                   โ   BROWSER     โ
โ   Desktop     โ                   โ   Web         โ
โ   Mobile      โ                   โ   Mobile      โ
โโโโโโโโโฌโโโโโโโโ                   โโโโโโโโโฌโโโโโโโโ
        โ                                   โ
        โ /painel                           โ https://
        โ /admin                            โ
        โผ                                   โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                      CAMADA DE APLICAรรO                       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                           โ                                    โ
โ  ๐ค BOT DISCORD           โ  ๐ DASHBOARD WEB                 โ
โ  SquareCloud              โ  Vercel                            โ
โ                           โ                                    โ
โ  โข Comandos Slash         โ  โข Interface Visual                โ
โ  โข Controle de Ponto      โ  โข Estatรญsticas                    โ
โ  โข Permissรตes             โ  โข Relatรณrios                      โ
โ  โข Logs Automรกticos       โ  โข APIs REST                       โ
โ                           โ                                    โ
โ  bot_ponto_acedepol.py    โ  app.py + index.html              โ
โ                           โ                                    โ
โโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโ
            โ                               โ
            โ         DATABASE_URL          โ
            โ                               โ
            โโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโ
                            โผ
            โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
            โ   ๐๏ธ BANCO DE DADOS           โ
            โ   Neon.tech (PostgreSQL)      โ
            โ                               โ
            โ  โข ponto_data (JSONB)         โ
            โ  โข Sincronizaรงรฃo em tempo realโ
            โ  โข Backup automรกtico          โ
            โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

## ๐ Fluxo de Dados Detalhado

### ๐ฅ Entrada de Dados (Bater Ponto)

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ 1. USUรRIO INTERAGE                                              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                            โ
                            โผ
                    ๐ฎ Policial Joรฃo
                            โ
                            โ Entra no canal de voz
                            โ Usa comando /painel
                            โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ 2. BOT PROCESSA                                                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                                  โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ  โ Verificaรงรตes:                                             โ  โ
โ  โ โ Estรก em canal de voz?                                  โ  โ
โ  โ โ Canal permitido?                                       โ  โ
โ  โ โ Tem cargo autorizado?                                  โ  โ
โ  โ โ Jรก tem ponto aberto?                                   โ  โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ                            โ                                     โ
โ                            โผ                                     โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ  โ Processamento:                                            โ  โ
โ  โ โข Captura horรกrio atual                                  โ  โ
โ  โ โข Registra canal de voz                                  โ  โ
โ  โ โข Cria sessรฃo ativa                                      โ  โ
โ  โ โข Prepara dados para salvar                              โ  โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ                                                                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                            โ
                            โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ 3. SALVA NO BANCO                                                โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                                  โ
โ  {                                                               โ
โ    "user_id": "123456789",                                       โ
โ    "name": "Joรฃo Silva",                                         โ
โ    "current_session": {                                          โ
โ      "entrada": "2025-06-10 08:00:00",                          โ
โ      "canal": "Patrulha 01"                                     โ
โ    }                                                             โ
โ  }                                                               โ
โ                                                                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                            โ
                            โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ 4. CONFIRMAรรO                                                   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                                  โ
โ  โ Ponto Aberto com Sucesso                                    โ
โ  ๐ฎ Policial: Joรฃo Silva                                        โ
โ  ๐ Horรกrio: 2025-06-10 08:00:00                               โ
โ  ๐ Canal: Patrulha 01                                          โ
โ                                                                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### ๐ค Saรญda de Dados (Dashboard)

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ 1. USUรRIO ACESSA DASHBOARD                                      โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                            โ
                            โผ
                  ๐ https://acedepol.vercel.app
                            โ
                            โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ 2. PรGINA CARREGA                                                โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                                  โ
โ  index.html                                                      โ
โ  โโโ Estrutura HTML                                             โ
โ  โโโ Estilos CSS                                                โ
โ  โโโ JavaScript                                                 โ
โ      โโโ carregarDados()                                        โ
โ                                                                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                            โ
                            โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ 3. BUSCA DADOS VIA API                                           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                                  โ
โ  fetch('/api/stats')      โ Estatรญsticas gerais                 โ
โ  fetch('/api/usuarios')   โ Lista de usuรกrios                   โ
โ  fetch('/api/online')     โ Usuรกrios online                     โ
โ                                                                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                            โ
                            โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ 4. SERVIDOR PROCESSA                                             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                                  โ
โ  app.py                                                          โ
โ  โโโ Conecta no banco                                           โ
โ  โโโ Busca dados                                                โ
โ  โโโ Processa informaรงรตes                                       โ
โ  โโโ Retorna JSON                                               โ
โ                                                                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                            โ
                            โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ 5. EXIBE NA TELA                                                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                                  โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โ
โ  โ ๐ Dashboard ACEDEPOL                                   โ    โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค    โ
โ  โ                                                         โ    โ
โ  โ  ๐ฅ Total: 50    ๐ข Online: 12    ๐ด Offline: 38      โ    โ
โ  โ                                                         โ    โ
โ  โ  ๐ฎ Joรฃo Silva        โฑ๏ธ 45:30:00    ๐ข Online        โ    โ
โ  โ  ๐ฎ Maria Santos      โฑ๏ธ 42:15:00    ๐ด Offline       โ    โ
โ  โ  ๐ฎ Pedro Costa       โฑ๏ธ 38:45:00    ๐ข Online        โ    โ
โ  โ                                                         โ    โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โ
โ                                                                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

## ๐ Fluxo de Seguranรงa

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    CAMADAS DE SEGURANรA                          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

1๏ธโฃ AUTENTICAรรO DISCORD
   โโโ Bot verifica ID do usuรกrio
   โโโ Valida token do Discord
   โโโ Confirma membro do servidor

2๏ธโฃ AUTORIZAรรO POR CARGO
   โโโ Verifica cargos permitidos
   โโโ Valida cargos admin
   โโโ Bloqueia acesso nรฃo autorizado

3๏ธโฃ VALIDAรรO DE CANAL
   โโโ Verifica se estรก em canal de voz
   โโโ Valida canal permitido
   โโโ Impede registro em canal errado

4๏ธโฃ PROTEรรO DE DADOS
   โโโ .env nรฃo commitado
   โโโ Tokens em variรกveis de ambiente
   โโโ Banco com SSL/TLS

5๏ธโฃ LOGS DE AUDITORIA
   โโโ Registra todas as aรงรตes
   โโโ Envia para canal de logs
   โโโ Mantรฉm histรณrico
```

## ๐ Estrutura de Dados

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    BANCO DE DADOS                                โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                                  โ
โ  ponto_data (JSONB)                                             โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ  โ                                                           โ  โ
โ  โ  {                                                        โ  โ
โ  โ    "123456789": {                    โ User ID           โ  โ
โ  โ      "name": "Joรฃo Silva",           โ Nome              โ  โ
โ  โ      "records": [                    โ Histรณrico         โ  โ
โ  โ        {                                                  โ  โ
โ  โ          "entrada": "2025-06-10 08:00:00",              โ  โ
โ  โ          "saida": "2025-06-10 17:00:00",                โ  โ
โ  โ          "canal": "Patrulha 01",                        โ  โ
โ  โ          "duracao": "9:00:00",                          โ  โ
โ  โ          "manual": false                                โ  โ
โ  โ        }                                                  โ  โ
โ  โ      ],                                                   โ  โ
โ  โ      "current_session": {            โ Sessรฃo Ativa     โ  โ
โ  โ        "entrada": "2025-06-10 08:00:00",                โ  โ
โ  โ        "canal": "Patrulha 01"                           โ  โ
โ  โ      }                                                    โ  โ
โ  โ    }                                                      โ  โ
โ  โ  }                                                        โ  โ
โ  โ                                                           โ  โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ                                                                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

## ๐ APIs REST

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                        ENDPOINTS                                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                                  โ
โ  GET /                                                           โ
โ  โโโ Retorna: index.html (Dashboard)                           โ
โ                                                                  โ
โ  GET /api/stats                                                  โ
โ  โโโ Retorna: {                                                 โ
โ         "total_usuarios": 50,                                   โ
โ         "usuarios_online": 12,                                  โ
โ         "usuarios_offline": 38,                                 โ
โ         "total_registros": 1250                                 โ
โ       }                                                          โ
โ                                                                  โ
โ  GET /api/usuarios                                               โ
โ  โโโ Retorna: [                                                 โ
โ         {                                                        โ
โ           "id": "123456789",                                    โ
โ           "nome": "Joรฃo Silva",                                 โ
โ           "total_horas": "45:30:00",                           โ
โ           "total_registros": 25,                               โ
โ           "online": true                                        โ
โ         }                                                        โ
โ       ]                                                          โ
โ                                                                  โ
โ  GET /api/usuario/:id                                            โ
โ  โโโ Retorna: {                                                 โ
โ         "id": "123456789",                                      โ
โ         "nome": "Joรฃo Silva",                                   โ
โ         "registros": [...],                                     โ
โ         "sessao_atual": {...}                                   โ
โ       }                                                          โ
โ                                                                  โ
โ  GET /api/online                                                 โ
โ  โโโ Retorna: [                                                 โ
โ         {                                                        โ
โ           "id": "123456789",                                    โ
โ           "nome": "Joรฃo Silva",                                 โ
โ           "entrada": "2025-06-10 08:00:00",                    โ
โ           "canal": "Patrulha 01",                              โ
โ           "tempo_decorrido": "1:30:00"                         โ
โ         }                                                        โ
โ       ]                                                          โ
โ                                                                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

## ๐ Deploy Pipeline

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    PIPELINE DE DEPLOY                            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

DESENVOLVEDOR
     โ
     โ git add .
     โ git commit -m "Update"
     โ git push
     โผ
โโโโโโโโโโโโโโโ
โ   GITHUB    โ
โ  Repository โ
โโโโโโโโฌโโโโโโโ
       โ
       โ Webhook
       โผ
โโโโโโโโโโโโโโโ
โ   VERCEL    โ
โ  Auto Deployโ
โโโโโโโโโโโโโโโค
โ 1. Clone    โ
โ 2. Build    โ
โ 3. Deploy   โ
โ 4. HTTPS    โ
โโโโโโโโฌโโโโโโโ
       โ
       โ URL Gerada
       โผ
https://acedepol.vercel.app
       โ
       โ Acesso Pรบblico
       โผ
   ๐ฅ USUรRIOS
```

## ๐ฐ Custos Mensais

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    BREAKDOWN DE CUSTOS                           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                                  โ
โ  SquareCloud (Bot)                                              โ
โ  โโ Plano Grรกtis:        R$ 0/mรชs    (limitado)                โ
โ  โโ Plano Bรกsico:        R$ 10/mรชs   (recomendado)             โ
โ                                                                  โ
โ  Vercel (Dashboard)                                             โ
โ  โโ Plano Hobby:         R$ 0/mรชs    (grรกtis para sempre)      โ
โ                                                                  โ
โ  Neon.tech (Banco)                                              โ
โ  โโ Plano Free:          R$ 0/mรชs    (grรกtis para sempre)      โ
โ                                                                  โ
โ  GitHub (Repositรณrio)                                           โ
โ  โโ Plano Free:          R$ 0/mรชs    (grรกtis para sempre)      โ
โ                                                                  โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ  TOTAL:                  R$ 0-10/mรชs                            โ
โ                                                                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

## โก Performance

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    MรTRICAS DE PERFORMANCE                       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                                  โ
โ  Bot Discord (SquareCloud)                                      โ
โ  โโ Latรชncia:            ~50ms                                  โ
โ  โโ Uptime:              99.9%                                  โ
โ  โโ Resposta:            Instantรขnea                            โ
โ                                                                  โ
โ  Dashboard (Vercel)                                             โ
โ  โโ Load Time:           ~500ms                                 โ
โ  โโ TTFB:                ~100ms                                 โ
โ  โโ CDN:                 Global                                 โ
โ  โโ HTTPS:               Automรกtico                             โ
โ                                                                  โ
โ  Banco (Neon.tech)                                              โ
โ  โโ Query Time:          ~10ms                                  โ
โ  โโ Conexรตes:            Pooling                                โ
โ  โโ Backup:              Automรกtico                             โ
โ                                                                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

**Arquitetura robusta e escalรกvel!** ๐
